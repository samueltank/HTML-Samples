<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Canvas</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        vertical-align: baseline;
      }
      body {
        width: 97vw; /* queima a barra horizontal */
        height: 100vh;
        display: flex;
        align-items: flex-start;
        justify-content: center;
        flex-wrap: wrap;
        gap: 0;
        margin: 1rem 0 1rem 0;
        overflow-y: auto;
        gap: 0.5rem;
      }
      div {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 400px;
        height: 300px;
        gap: 1rem;
      }
      img {
        min-width: 40%;
        min-height: 60%;
        max-width: 80%;
        max-height: 80%;
        filter: blur(10px);
      }
      button {
        border: none;
        padding: 0.5rem;
        cursor: pointer;
        border-radius: 1rem;
        background-color: rgb(98, 19, 105);
        color: white;
        transition: all 0.2s ease;
      }
      button:hover {
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.322);
      }
    </style>
  </head>
  <body>
    <!--
      Um canvas é um container para um desenho/construção gráfico(a) feita(o) em
      JS. <canvas> é um elemento inline!
    -->

    <!-- exemplos de canvas: -->
    <canvas 
      id="canvas-line"
      width="400"
      height="300"
      style="border: 2px solid royalblue;"  
    >
    </canvas>

    <canvas
      id="canvas-circle"
      width="400"
      height="300"
      style="border: 2px solid dodgerblue;"  
    >
    </canvas>

    <canvas
      id="canvas-text"
      width="400"
      height="300"
      style="border: 2px solid palevioletred;"  
    >
    </canvas>

    <canvas
      id="canvas-empty-text"
      width="400"
      height="300"
      style="border: 2px solid greenyellow;"  
    >
    </canvas>

    <canvas
      id="canvas-gradient"
      width="400"
      height="300"
      style="border: 2px solid rebeccapurple;"  
    >
    </canvas>

    <canvas
      id="canvas-radi-gradient"
      width="400"
      height="300"
      style="border: 2px solid red;"  
    >
    </canvas>

    <div>
      <img
      id="draw-img" 
      src="./img/notebookApple.jpg" 
      title="Click no botão para que a foto apareça"
      alt="notebook apple" 
      >

      <button id="draw">Desenhar foto</button>
    </div>
    <canvas
      id="canvas-draw-image"
      width="400"
      height="300"
      style="border: 2px solid orangered;"  
    >
    </canvas>

    <!-- scripts geradores de canvas: -->
    <script>
      // desenha uma linha dentro do canvas:
      let c   = document.getElementById("canvas-line");
      let ctx = c.getContext("2d");
      ctx.moveTo(200, 150);
      ctx.lineTo(400, 300);
      ctx.stroke();

      // desenha um círculo no meio do canvas:
      {
        let c   = document.getElementById("canvas-circle");
        let ctx = c.getContext("2d");
        ctx.beginPath();
        ctx.arc(200, 150, 100, 0, 2 * Math.PI);
        ctx.stroke();
      }

      // desenha um texto dentro de um canvas:
      {
        let c    = document.getElementById("canvas-text");
        let ctx  = c.getContext("2d");
        ctx.font = "2rem Consolas";
        ctx.fillText("Hello World", 100, 150);
      }

      // desenha um texto dentro de um canvas:
      {
        let c    = document.getElementById("canvas-empty-text");
        let ctx  = c.getContext("2d");
        ctx.font = "2rem Consolas";
        ctx.strokeText("Hello World", 100, 150);
      }

      // desenha um gradiente linear retangulas:
      {
        let c   = document.getElementById("canvas-gradient");
        let ctx = c.getContext("2d");
        
        // cria o gradiente para ser aplicado ao canvas:
        let grd = ctx.createLinearGradient(0, 0, 200, 0);
        grd.addColorStop(0, "red");
        grd.addColorStop(1, "white");

        // preenchimento com gradiente:
        ctx.fillStyle = grd;
        ctx.fillRect(10, 10, 150, 80);
      }

      // desenha um gradiente circular:
      {
        let c = document.getElementById("canvas-radi-gradient");
        let ctx = c.getContext("2d");

        // Create gradient
        let grd = ctx.createRadialGradient(75, 50, 5, 90, 60, 100);
        grd.addColorStop(0, "red");
        grd.addColorStop(1, "white");

        // Fill with gradient
        ctx.fillStyle = grd;
        ctx.fillRect(10, 10, 150, 80);
      }

      // desenha uma imagem:
      const btnDraw = document.getElementById("draw");
      btnDraw.addEventListener("click", () => drawPhoto(200, 300));
      
      var key = true;
      
      /*
       * a função desenha a imagem quando clicado pela primeira vez e apaga a
       * imagem quando clicado novamente!
       */
      function drawPhoto(width, height) {
        if (key == true) {
          let c   = document.getElementById("canvas-draw-image");
          let ctx = c.getContext("2d");

          // pega a imagem que será desenhada:
          let img = document.getElementById("draw-img");
          // desenha a imagem dentro do canvas:
          ctx.drawImage(img, 100, 0, width, height);
          key = false;
        } else {
          let c   = document.getElementById("canvas-draw-image");
          let ctx = c.getContext("2d");
          // limpa o canvas:
          ctx.clearRect(0, 0, 400, 300);
          key = true;
        }
      }
      
    </script>
  </body>
</html>
